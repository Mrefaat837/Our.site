<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shoghl Mokh | Mohamed Refaat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #e63946;
  --secondary: #b71c1c;
  --light: #fceae9;
  --dark: #2b0a0a;
}

body { font-family:'Poppins', sans-serif; background:var(--light); color:var(--dark); margin:0; padding:0;}
header { background: linear-gradient(135deg,var(--secondary),var(--primary)); color:#fff; text-align:center; padding:20px;}
header h1 { font-size:2.5rem;}
header p { opacity:0.9;}

#sidebar {
  position:fixed; left:-280px; top:0; width:280px; height:100%; background:var(--primary); color:#fff;
  padding:90px 25px; transition:0.5s; overflow-y:auto; z-index:1000;
}
#sidebar h3 { font-size:24px; margin-bottom:20px; }
#sidebar ul { list-style:none; font-size:18px; line-height:2.5;}
#sidebar ul li a { color:white; text-decoration:none; display:flex; align-items:center; gap:8px;}

#toggleSidebarBtn {
  position:fixed; top:80px; left:20px; z-index:1002;
  padding:14px 18px; border-radius:12px; border:none; background:var(--primary);
  color:white; font-size:26px; cursor:pointer; box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.container { max-width:1100px; margin:140px auto 50px; padding:0 20px; }

.task-card { background:#fff; border-radius:12px; padding:15px 20px; margin-bottom:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); display:flex; justify-content:space-between; align-items:center; }
.task-card input[type=checkbox] { transform:scale(1.5); margin-right:10px; cursor:pointer; }
.task-card button { margin-left:5px; cursor:pointer; border:none; border-radius:6px; padding:5px 8px; }
.task-card button:hover { opacity:0.8; }

.add-btn { position:fixed; bottom:30px; right:30px; width:50px; height:50px; border-radius:50%; background:#4b6cb7; color:white; font-size:28px; border:none; cursor:pointer; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
.add-btn:hover { background:var(--secondary); }

.materialForm { display:flex; flex-direction:column; gap:10px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.1); margin-bottom:30px;}
.materialForm input, .materialForm textarea { padding:10px; border-radius:8px; border:1px solid #ccc; font-size:1rem; width:100%; }
.materialForm button { background:var(--primary); color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; font-size:1rem;}
.materialForm button:hover { background:var(--secondary); }

.progress-container { background:#ccc; border-radius:20px; height:25px; margin:20px 0; overflow:hidden;}
.progress-bar { background:#e63946; height:100%; width:0%; text-align:center; color:white; font-weight:bold; line-height:25px; }

.log-container { background:#fff; padding:15px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1); margin-bottom:20px; max-height:300px; overflow-y:auto;}
</style>
</head>
<body>

<div id="sidebar">
  <h3>ğŸ“š Dashboard</h3>
  <ul>
    <li><a href="index.html">ğŸ  Home</a></li>
    <li><a href="year1.html">ğŸ©º Year 1</a></li>
    <li><a href="year2.html">ğŸ“– Year 2</a></li>
    <li><a href="year3.html">ğŸ¥ Year 3</a></li>
    <li><a href="deen.html">ğŸ•Œ Islamic Routine</a></li>
    <li><a href="calc.html">ğŸ§® Medical Calculators</a></li>
    <li><a href="tasks.html">ğŸ’ª Tasks</a></li>
    <li><a href="brainwork.html">ğŸ§  Brain Work</a></li>
    <li><a href="suggest.html">ğŸ’¡ Suggestions</a></li>
    <li><a href="suggest_admin.html">ğŸ”’ Admin</a></li>
  </ul>
</div>
<button id="toggleSidebarBtn">â˜°</button>

<header>
  <h1>Ø´ØºÙ„ Ù…Ø®Ùƒ - Ø§Ù„Ø±ÙˆØªÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ</h1>
  <p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØµÙ„ÙˆØ§ØªØŒ Ø§Ù„Ø³Ù†Ù†ØŒ Ø§Ù„Ø£Ø°ÙƒØ§Ø±ØŒ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆÙ‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„</p>
</header>

<div class="container">
  <h2>Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</h2>
  <div id="taskList"></div>

  <div class="progress-container">
    <div class="progress-bar" id="progressBar">0%</div>
  </div>

  <button class="add-btn" id="showFormBtn">â•</button>

  <form class="materialForm" id="taskForm" style="display:none;">
    <input type="text" id="taskName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©" required>
    <input type="number" id="taskPoints" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·" min="1" required>
    <button type="submit">Ø§Ø¶Ù Ø§Ù„Ù…Ù‡Ù…Ø©</button>
    <button type="button" id="cancelFormBtn" style="background:#e63946;">Ø¥Ù„ØºØ§Ø¡</button>
  </form>

  <h2>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
  <div class="log-container" id="dailyLog"></div>

  <h2>Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ÙƒÙ„ÙŠ</h2>
  <div class="log-container" id="totalLog"></div>
</div>

<script>
const sidebar = document.getElementById('sidebar');
document.getElementById('toggleSidebarBtn').onclick = () => {
  sidebar.style.left = sidebar.style.left === '0px' ? '-280px' : '0px';
};

const showFormBtn = document.getElementById('showFormBtn');
const taskForm = document.getElementById('taskForm');
const cancelFormBtn = document.getElementById('cancelFormBtn');
const taskList = document.getElementById('taskList');
const progressBar = document.getElementById('progressBar');
const dailyLog = document.getElementById('dailyLog');
const totalLog = document.getElementById('totalLog');

showFormBtn.onclick = () => { taskForm.style.display='flex'; }
cancelFormBtn.onclick = () => { taskForm.style.display='none'; }

let tasks = JSON.parse(localStorage.getItem('dailyTasks')) || [];

if(tasks.length===0){
  tasks.push(
    {name:'ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø±', points:20, done:false},
    {name:'ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø±', points:20, done:false},
    {name:'ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±', points:20, done:false},
    {name:'ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨', points:20, done:false},
    {name:'ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡', points:20, done:false},
    {name:'Ø³Ù†Ù† Ø§Ù„ÙØ¬Ø±', points:5, done:false},
    {name:'Ø³Ù†Ù† Ø§Ù„Ø¸Ù‡Ø±', points:5, done:false},
    {name:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø­', points:5, done:false},
    {name:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', points:5, done:false},
    {name:'Ù‚Ø±Ø§Ø¡Ø© ØµÙØ­Ø© Ù‚Ø±Ø¢Ù†', points:1, done:false},
    {name:'Ø­ÙØ¸ ØµÙØ­Ø© Ù‚Ø±Ø¢Ù†', points:2, done:false},
    {name:'Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„', points:10, done:false}
  );
}

let dailyHistory = JSON.parse(localStorage.getItem('dailyLog')) || [];
let totalHistory = JSON.parse(localStorage.getItem('totalLog')) || [];

function saveData(){
  localStorage.setItem('dailyTasks', JSON.stringify(tasks));
  localStorage.setItem('dailyLog', JSON.stringify(dailyHistory));
  localStorage.setItem('totalLog', JSON.stringify(totalHistory));
}

function renderTasks(){
  taskList.innerHTML='';
  tasks.forEach((t,index)=>{
    const card = document.createElement('div');
    card.className='task-card';
    card.innerHTML=`
      <div>
        <input type="checkbox" ${t.done?'checked':''} onchange="toggleTask(${index})">
        ${t.name} (${t.points} pts)
      </div>
      <div>
        <button onclick="editTask(${index})">âœï¸</button>
        <button onclick="deleteTask(${index})" style="background:#e63946;color:white;">ğŸ—‘ï¸</button>
      </div>
    `;
    taskList.appendChild(card);
  });
  updateProgress();
}

function toggleTask(index){
  tasks[index].done = !tasks[index].done;
  saveData();
  renderTasks();
  renderDailyLog();
}

function editTask(index){
  const newPoints = prompt('Ø­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯:', tasks[index].points);
  if(newPoints!==null && !isNaN(newPoints)){
    tasks[index].points = parseInt(newPoints);
    saveData();
    renderTasks();
    renderDailyLog();
  }
}

function deleteTask(index){
  if(confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø© "${tasks[index].name}"ØŸ`)){
    tasks.splice(index,1);
    saveData();
    renderTasks();
    renderDailyLog();
    renderTotalLog();
  }
}

function updateProgress(){
  let totalPoints = tasks.reduce((sum,t)=>sum+t.points,0);
  let earnedPoints = tasks.filter(t=>t.done).reduce((sum,t)=>sum+t.points,0);
  let percent = totalPoints===0 ? 0 : Math.round(earnedPoints/totalPoints*100);
  progressBar.style.width=percent+'%';
  progressBar.textContent=percent+'%';
}

function renderDailyLog(){
  dailyLog.innerHTML='';
  const date = new Date().toLocaleDateString();
  tasks.forEach(t=>{
    dailyLog.innerHTML+=`<div>${date} - ${t.name}: ${t.done ? t.points : 0} pts</div>`;
  });
}

function renderTotalLog(){
  totalLog.innerHTML='';
  totalHistory.forEach(e=>{
    totalLog.innerHTML+=`<div>${e.date}: ${e.points} pts</div>`;
  });
}

document.getElementById('taskForm').onsubmit = e=>{
  e.preventDefault();
  const name = document.getElementById('taskName').value;
  const points = parseInt(document.getElementById('taskPoints').value);
  tasks.push({name, points, done:false});
  saveData();
  renderTasks();
  taskForm.reset();
  taskForm.style.display='none';
}

renderTasks();
renderDailyLog();
renderTotalLog();

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (ÙŠÙ…ÙƒÙ†Ùƒ Ø¶Ø¨Ø· Ø§Ù„ÙˆÙ‚Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©)
setInterval(()=>{
  const now = new Date();
  if(now.getHours()===0 && now.getMinutes()===0){
    let earnedPoints = tasks.filter(t=>t.done).reduce((sum,t)=>sum+t.points,0);
    totalHistory.push({date:now.toLocaleDateString(), points:earnedPoints});
    tasks.forEach(t=>t.done=false);
    saveData();
    renderTasks();
    renderDailyLog();
    renderTotalLog();
  }
},60000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆÙ‚Øª
</script>
</body>
</html>

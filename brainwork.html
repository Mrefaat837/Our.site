<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brain Work | Mohamed Refaat</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #e63946;
  --secondary: #b71c1c;
  --light: #fceae9;
  --dark: #2b0a0a;
}

* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
body { background: var(--light); color: var(--dark); }

header {
  min-height:120px; 
  background: linear-gradient(135deg, var(--secondary), var(--primary));
  color:#fff; display:flex; flex-direction:column; justify-content:center; align-items:center;
  text-align:center; padding:20px;
}
header h1{ font-size:2.8rem; margin-bottom:10px; }
header p{ font-size:1.2rem; opacity:0.9; }

#sidebar {
  position: fixed; left:-280px; top:0; width:280px; height:100%; 
  background: var(--primary); color:#fff; padding:90px 25px; transition:0.5s; z-index:1000; overflow-y:auto;
}
#sidebar h3{ font-size:24px; margin-bottom:20px; }
#sidebar ul{ list-style:none; font-size:18px; line-height:2.5; }
#sidebar ul li a{ color:white; text-decoration:none; display:flex; align-items:center; gap:8px; }

#toggleSidebarBtn {
  position: fixed; top:80px; left:20px; z-index:1002; padding:14px 18px;
  border-radius:12px; border:none; background: var(--secondary); color:white; font-size:26px; cursor:pointer;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.container { max-width:1100px; margin:140px auto 50px; padding:0 20px; }

h2{text-align:center; font-size:2.2rem; margin-bottom:20px;}
.gameSelect, .scoreBoard{margin:20px auto; max-width:600px; text-align:center;}
button.gameBtn{padding:10px 20px; margin:10px; border:none; border-radius:10px; background: var(--primary); color:white; font-size:1rem; cursor:pointer;}
button.gameBtn:hover{background:var(--secondary);}
#questionBox{margin-top:30px; text-align:center;}
#questionBox p{font-size:1.3rem; margin-bottom:15px;}
.optionBtn{padding:10px 15px; margin:5px; border:none; border-radius:8px; background:var(--primary); color:white; cursor:pointer;}
.optionBtn:hover{background:var(--secondary);}
#scoreDisplay{margin-top:20px; font-size:1.2rem; font-weight:600;}
#recordBox{margin-top:30px; text-align:left; background:#fff; padding:15px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<div id="sidebar">
  <h3>üìö Dashboard</h3>
  <ul>
    <li><a href="index.html">üè† Home</a></li>
    <li><a href="year1.html">ü©∫ Year 1</a></li>
    <li><a href="year2.html">üìñ Year 2</a></li>
    <li><a href="year3.html">üè• Year 3</a></li>
    <li><a href="deen.html">üïå Islamic Routine</a></li>
    <li><a href="calc.html">üßÆ Medical Calculators</a></li>
    <li><a href="tasks.html">üí™ Tasks</a></li>
    <li><a href="brainwork.html">üß† Brain Work</a></li>
    <li><a href="suggest.html">üí° Suggestions</a></li>
    <li><a href="suggest_admin.html">üîí Admin</a></li>
  </ul>
</div>

<button id="toggleSidebarBtn">‚ò∞</button>

<header>
  <h1>Brain Work</h1>
  <p>Test your math & logic skills</p>
</header>

<div class="container">
  <div class="gameSelect">
    <button class="gameBtn" onclick="startGame('mcq')">üìù Multiple Choice</button>
    <button class="gameBtn" onclick="startGame('write')">‚úèÔ∏è Write Answer</button>
    <button class="gameBtn" onclick="showRecord()">üìä My Record</button>
  </div>

  <div id="questionBox" style="display:none;">
    <p id="questionText"></p>
    <div id="optionsContainer"></div>
    <div id="scoreDisplay"></div>
    <button onclick="nextQuestion()" style="display:none;margin-top:15px;">Next</button>
  </div>

  <div id="recordBox" style="display:none;"></div>
</div>

<script>
const sidebar = document.getElementById('sidebar');
document.getElementById('toggleSidebarBtn').onclick = () => {
  sidebar.style.left = sidebar.style.left === '0px' ? '-280px' : '0px';
};

let currentGame = '';
let score = 0;
let questionCount = 0;
let currentAnswer = 0;
let questionsAsked = [];
let history = JSON.parse(localStorage.getItem('brainworkHistory')) || {mcq:{last:0,high:0},write:{last:0,high:0}};

function startGame(type){
  currentGame = type;
  score = 0;
  questionCount = 0;
  questionsAsked = [];
  document.getElementById('questionBox').style.display = 'block';
  document.getElementById('recordBox').style.display = 'none';
  nextQuestion();
}

function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

function generateQuestion(){
  let difficulty = Math.floor(questionCount/5)+1; // ŸÉŸÑ 5 ÿ£ÿ≥ÿ¶ŸÑÿ© ÿ™ÿ≤ŸäÿØ ÿßŸÑÿµÿπŸàÿ®ÿ©
  let a = randomInt(1*difficulty,10*difficulty);
  let b = randomInt(1*difficulty,10*difficulty);
  let op = ['+','-','*'][randomInt(0,2)];
  let question = `${a} ${op} ${b}`;
  let answer = eval(question);
  return {question, answer};
}

function nextQuestion(){
  let q = generateQuestion();
  while(questionsAsked.includes(q.question)){ q = generateQuestion(); }
  questionsAsked.push(q.question);
  currentAnswer = q.answer;
  questionCount++;
  document.getElementById('questionText').innerText = q.question;
  document.getElementById('scoreDisplay').innerText = `Score: ${score}`;
  const optionsContainer = document.getElementById('optionsContainer');
  optionsContainer.innerHTML = '';

  if(currentGame==='mcq'){
    let options = [q.answer, q.answer+randomInt(1,5), q.answer-randomInt(1,5), q.answer+randomInt(6,10)];
    options.sort(()=>Math.random()-0.5);
    options.forEach(opt=>{
      let btn = document.createElement('button');
      btn.className='optionBtn';
      btn.innerText=opt;
      btn.onclick = ()=>checkAnswer(opt);
      optionsContainer.appendChild(btn);
    });
  } else {
    let input = document.createElement('input');
    input.type='number';
    input.placeholder='Write your answer';
    input.id='writeInput';
    let btn = document.createElement('button');
    btn.innerText='Submit';
    btn.onclick=()=>checkAnswer(parseFloat(document.getElementById('writeInput').value));
    optionsContainer.appendChild(input);
    optionsContainer.appendChild(btn);
  }
}

function checkAnswer(ans){
  if(ans===currentAnswer){
    score++;
  } else {
    // ÿ∫ŸÑÿ∑ => Ÿäÿ≠ŸÅÿ∏ ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿßŸÑŸä ÿ´ŸÖ Ÿäÿ±ÿ¨ÿπ ÿµŸÅÿ±
    if(score>history[currentGame].high) history[currentGame].high=score;
    history[currentGame].last = score;
    localStorage.setItem('brainworkHistory',JSON.stringify(history));
    score=0;
  }
  document.getElementById('scoreDisplay').innerText = `Score: ${score}`;
  nextQuestion();
}

function showRecord(){
  const box = document.getElementById('recordBox');
  box.style.display='block';
  document.getElementById('questionBox').style.display='none';
  box.innerHTML=`<h3>My Record</h3>
    <p>Multiple Choice - Last: ${history.mcq.last} | High: ${history.mcq.high}</p>
    <p>Write Answer - Last: ${history.write.last} | High: ${history.write.high}</p>`;
}
</script>

</body>
</html>

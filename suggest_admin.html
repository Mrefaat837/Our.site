<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Suggestions | Mohamed Refaat</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root { --primary:#e63946; --secondary:#b71c1c; --light:#fceae9; --dark:#2b0a0a; }
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:var(--light);color:var(--dark);}
header{min-height:120px;background:linear-gradient(135deg,var(--secondary),var(--primary));color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;}
header h1{font-size:2.6rem;margin-bottom:10px;}
#sidebar{position: fixed; left:-280px; top:0; width:280px; height:100%; background: var(--primary); color:#fff; padding:90px 25px; transition:0.5s; z-index:1000; overflow-y:auto;}
#sidebar h3{ font-size:24px; margin-bottom:20px;}
#sidebar ul{ list-style:none; font-size:18px; line-height:2.5; }
#sidebar ul li a{ color:white; text-decoration:none; display:flex; align-items:center; gap:8px;}
#toggleSidebarBtn{position: fixed; top:80px; left:20px; z-index:1002; padding:14px 18px; border-radius:12px; border:none; background: var(--secondary); color:white; font-size:26px; cursor:pointer;}
.container{max-width:900px;margin:140px auto 50px;padding:0 20px;}
ul{list-style:none;}
li{background:#fff;margin-bottom:15px;padding:20px;border-radius:14px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
li strong{font-size:1.1rem;}
li .time{display:block;margin-top:8px;font-size:0.85rem;color:#777;}
</style>
</head>
<body>

<!-- ğŸ” Password Protection -->
<script>
const ADMIN_PASSWORD = "12345"; // ØºÙŠØ±Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
const pass = prompt("Enter admin password:");
if(pass!==ADMIN_PASSWORD){
  document.body.innerHTML=`<div style="height:100vh; display:flex; justify-content:center; align-items:center; font-size:2rem; font-weight:700; color:#b71c1c;">ğŸš« Access Denied</div>`;
  throw new Error("Access denied");
}
</script>

<div id="sidebar">
  <h3>ğŸ“š Dashboard</h3>
  <ul>
    <li><a href="index.html">ğŸ  Home</a></li>
    <li><a href="year1.html">ğŸ©º Year 1</a></li>
    <li><a href="year2.html">ğŸ“– Year 2</a></li>
    <li><a href="year3.html">ğŸ¥ Year 3</a></li>
    <li><a href="deen.html">ğŸ•Œ Islamic Routine</a></li>
    <li><a href="calc.html">ğŸ§® Medical Calculators</a></li>
    <li><a href="brainwork.html">ğŸ§  Brain Work</a></li>
    <li><a href="suggest.html">ğŸ’¡ Suggestions</a></li>
    <li><a href="suggest_admin.html">ğŸ”’ Admin</a></li>
  </ul>
</div>

<button id="toggleSidebarBtn">â˜°</button>

<header>
  <h1>Admin Suggestions</h1>
  <p>Private â€“ Admin Only</p>
</header>

<div class="container">
  <ul id="suggestionsList"></ul>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
const sidebar = document.getElementById('sidebar');
document.getElementById('toggleSidebarBtn').onclick = () => {
  sidebar.style.left = sidebar.style.left === '0px' ? '-280px' : '0px';
};

const firebaseConfig = {
  apiKey: "AIzaSyCaMUN2J922Uer9xGfhrBbrnlBNp2YljP0",
  authDomain: "mrefaat-2548a.firebaseapp.com",
  projectId: "mrefaat-2548a",
  storageBucket: "mrefaat-2548a.firebasestorage.app",
  messagingSenderId: "731800029782",
  appId: "1:731800029782:web:ec5c36eb8858e990eb49f7",
  measurementId: "G-6DQ87V5H92"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const suggestionsList = document.getElementById('suggestionsList');

db.collection('suggestions').orderBy('timestamp','desc').onSnapshot(snapshot=>{
  suggestionsList.innerHTML='';
  snapshot.forEach(doc=>{
    const d = doc.data();
    const time = d.timestamp ? d.timestamp.toDate().toLocaleString() : '';
    const li = document.createElement('li');
    li.innerHTML=`<strong>${d.name}</strong><p>${d.suggestion}</p><span class="time">${time}</span>`;
    suggestionsList.appendChild(li);
  });
});
</script>

</body>
</html>
